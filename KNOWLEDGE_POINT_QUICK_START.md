# 知识点管理功能 - 快速开始

## 访问知识点管理

1. **登录系统**为教师账户
2. **点击课程管理** → 选择一个科目 → **点击"课程门户"**
3. 在左侧侧边栏中，你会看到新增的 **"知识点管理"** 菜单项
4. **点击"知识点管理"** 进入知识点列表页面

## 主要功能

### 📋 知识点列表
- 显示该科目的所有知识点
- 搜索知识点
- 查看每个知识点关联的习题数量
- 查看知识点的层级关系

### ➕ 添加知识点
1. 点击 **"添加知识点"** 按钮
2. 输入知识点名称（必填）
3. 可选：选择父知识点（用于构建层级）
4. 点击 **"保存"**

### ✏️ 编辑知识点
1. 在知识点列表中，点击某个知识点的 **"编辑"** 按钮
2. 修改知识点信息
3. 点击 **"保存"**

### 🗑️ 删除知识点
1. 在知识点列表中，点击某个知识点的 **"删除"** 按钮
2. 确认删除
3. ⚠️ 注意：如果知识点关联了习题，无法删除

### 🔗 关联习题
1. 在知识点列表中，点击某个知识点的 **"关联习题"** 按钮
2. 查看该科目的所有习题
3. 点击 **"关联"** 或 **"已关联"** 按钮来切换关联状态
4. 系统会实时更新关联计数

### 🔀 管理知识点关系
1. 在知识点列表底部，点击 **"管理知识点关系"** 按钮
2. 在左侧面板中：
   - 选择 **前置知识点**（源）
   - 选择 **后续知识点**（目标）
   - 点击 **"添加关系"**
3. 在右侧列表中查看所有关系
4. 点击 **"删除"** 可以删除不需要的关系

## 工作流示例

### 场景：为数学科目添加函数相关知识点

1. **添加主知识点**
   - 添加 "函数" 知识点

2. **添加子知识点**
   - 添加 "一次函数"，父知识点选择 "函数"
   - 添加 "二次函数"，父知识点选择 "函数"
   - 添加 "指数函数"，父知识点选择 "函数"

3. **关联习题**
   - 为 "一次函数" 关联所有一次函数相关的习题
   - 为 "二次函数" 关联所有二次函数相关的习题
   - 为 "指数函数" 关联所有指数函数相关的习题

4. **设置知识点关系**
   - 添加关系：一次函数 → 二次函数（表示学习二次函数前需要掌握一次函数）
   - 添加关系：一次函数 → 指数函数

## 常见问题

### Q: 为什么无法删除某个知识点？
**A:** 该知识点可能关联了习题。请先进入 "关联习题" 页面，取消所有关联，然后再删除。

### Q: 知识点关系有什么用？
**A:** 知识点关系用于诊断系统分析学生的学习路径。系统可以根据这些关系推荐学生学习的顺序。

### Q: 可以修改知识点的名称吗？
**A:** 可以。点击 "编辑" 按钮修改知识点名称。

### Q: 一个知识点可以关联多个习题吗？
**A:** 可以。一个知识点可以关联多个习题，一个习题也可以关联多个知识点。

### Q: 如何查看某个习题关联了哪些知识点？
**A:** 在题库管理页面，点击习题的 "编辑" 按钮，可以查看和修改该习题关联的知识点。

## 权限说明

- 只有该科目的授课教师可以管理知识点
- 其他教师无法修改该科目的知识点
- 学生可以查看知识点，但无法修改

## 数据关系图

```
Subject (科目)
  ├── KnowledgePoint (知识点)
  │   ├── parent (父知识点)
  │   ├── children (子知识点)
  │   └── QMatrix (与习题的关联)
  │       └── Exercise (习题)
  └── KnowledgeGraph (知识点关系)
      ├── source (前置知识点)
      └── target (后续知识点)
```

## 技术细节

### URL 路由
- 列表：`/learning/teacher/knowledge-points/<subject_id>/`
- 添加：`/learning/teacher/knowledge-points/<subject_id>/add/`
- 编辑：`/learning/teacher/knowledge-points/<subject_id>/<kp_id>/edit/`
- 删除：`/learning/teacher/knowledge-points/<subject_id>/<kp_id>/delete/`
- 关联习题：`/learning/teacher/knowledge-points/<subject_id>/<kp_id>/exercises/`
- 切换关联：`/learning/teacher/knowledge-points/<subject_id>/<kp_id>/toggle-exercise/` (POST)
- 关系管理：`/learning/teacher/knowledge-points/<subject_id>/relationships/`
- 添加关系：`/learning/teacher/knowledge-points/<subject_id>/relationships/add/` (POST)
- 删除关系：`/learning/teacher/knowledge-points/<subject_id>/relationships/<relationship_id>/delete/` (POST)

### 前端交互
- 关联习题使用 AJAX，无需刷新页面
- 添加/删除关系使用表单提交，成功后自动刷新
- 所有操作都有成功/失败提示

## 下一步

- 在题库管理中为习题关联知识点
- 在诊断系统中查看学生对知识点的掌握情况
- 根据知识点关系为学生推荐学习路径
